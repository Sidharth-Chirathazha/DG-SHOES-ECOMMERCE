<!doctype html>

{% load static %}
{% load custom_filters %}
<html class="no-js" lang="">
    
<!-- Mirrored from demo.hasthemes.com/fowler-preview/fowler/account.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jun 2024 10:16:24 GMT -->
<head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Order Details</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico in the root directory -->
		<link rel="apple-touch-icon" href="apple-touch-icon.png">
        <link rel="shortcut icon" type="image/x-icon" href="{% static 'assets/img/favicon.ico' %}">
		
		<!-- Google Fonts -->
		<link href='https://fonts.googleapis.com/css?family=Raleway:400,300,500,600,700,800,900' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Roboto:400,300,500,700,900' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Lato:400,700,900,300' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
		<!-- all css here -->
		<!-- bootstrap v3.3.6 css -->
        <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">
		<!-- animate css -->
        <link rel="stylesheet" href="{% static 'assets/css/animate.css' %}">
        <!-- nivo slider CSS -->
		<link rel="stylesheet" href="{% static 'assets/lib/css/nivo-slider.css' %}" type="text/css" />
		<link rel="stylesheet" href="{% static 'assets/lib/css/preview.css' %}" type="text/css" media="screen" />
		<!-- jquery-ui.min css -->
        <link rel="stylesheet" href="{% static 'assets/css/jquery-ui.min.css' %}">
		<!-- meanmenu css -->
        <link rel="stylesheet" href="{% static 'assets/css/meanmenu.min.css' %}">
		<!-- owl.carousel css -->
        <link rel="stylesheet" href="{% static 'assets/css/owl.carousel.css' %}">
		<!-- font-awesome css -->
        <link rel="stylesheet" href="{% static 'assets/css/font-awesome.min.css' %}">
		<!-- style css -->
		<link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
		<!-- responsive css -->
        <link rel="stylesheet" href="{% static 'assets/css/responsive.css' %}">

		<link rel="stylesheet" href="{% static 'assets/css/order-details.css' %}">

		<!-- modernizr css -->
        <script src="{% static 'assets/js/vendor/modernizr-2.8.3.min.js' %}"></script>

		<link rel="stylesheet" href="{% static 'assets/css/top-nav.css' %}">

		{% comment %} <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.0/css/bootstrap.min.css">
    	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">	 {% endcomment %}

		<style>

			.bannerhead-area {

				background: rgba(0, 0, 0, 0) url('{% static 'assets/img/banner-new.jpg' %}') no-repeat scroll center center;
				position: relative;

			  }

			.section-titel {
			display: block;
			overflow: hidden;
			padding-bottom: 30px;
			position: relative;
			}

		.section-titel::after {
			background: rgba(0, 0, 0, 0) url('{% static 'assets/img/sec-titel.png' %}') no-repeat scroll 0 0;
			content: "";
			height: 100%;
			left: 39%;
			position: absolute;
			top: 30px;
			width: 100%;
			}
		.section-titel > h3 {
			color: #666666;
			font-family: "Montserrat",sans-serif;
			font-size: 20px;
			font-weight: 400;
			text-transform: uppercase;
			}
		.hot-deals-area {
			background-attachment: scroll;
			background-image: url("{% static 'assets/img/home-1/hot-deals.jpg' %}");
			background-position: center center;
			background-size: cover;
			}






		</style>
    </head>
    <body class="other-page">
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <!-- HEADER TOP AREA START -->
		<section class="header-top-area">
			<div class="container">
				<div class="header-content">
					<div class="user-info">
						{% if user.is_authenticated %}
							<i class="fa fa-user"></i>
							<span class="welcome-text">Welcome, {{ user.first_name }}</span>
							<a href="{% url 'logout' %}" class="auth-link">LOGOUT</a>
						{% else %}
							<a href="{% url 'login' %}" class="auth-link">LOG IN</a>
						{% endif %}
					</div>
				</div>
			</div>
		</section>
        <!-- HEADER TOP AREA END -->
		<!-- MENU AREA START -->
		<div class="menu-area">
			<div class="container">
				<div class="row">
					<div class="col-md-2 col-sm-2">
						<div class="logo-area">
							<a href="{% url 'home' %}"><img src="{% static 'assets/img/home-1/logo_dg_footer.png' %}" width="110" height="50" alt="" /></a>
						</div>
					</div>
					<div class="col-md-8 col-sm-8">
						<div class="main-menu">
							<ul class="list-inline">
							  <li class="expand active"><a href="{% url 'home' %}">HOME</a>
							  </li>
							  <li><a href="{% url 'shop_list' %}">SHOP</a>
								<!-- Mega Menu Four Column -->
								<div class="mega-menu">
									{% for category in categories%}
									<span>
										<a href="{% url 'shop_list' %}?category={{category.category_name}}" class="mega-title">{{ category.category_name }}</a>
										<a href="#"><img alt="{{category.category_name}}" src="{{category.image.url}}"/></a>
										{% for subcategory in category.subcategories.all %}
										{% if subcategory.is_listed %}
										<a href="{% url 'shop_list' %}?category={{category.category_name}}&subcategory={{subcategory.subcategory_name}}">{{ subcategory.subcategory_name}}</a>
										{% endif %}
										{% endfor %}
									</span>
									{% endfor %}
								</div>
							  </li>
							  <li class="expand"><a href="{% url 'user_account' %}">ACCOUNT</a>
							  </li>
							  <li><a href="{% url 'contact_us' %}">CONTACT</a></li>
							</ul>
						</div>
					</div>
					<!-- MOBILE-MENU-AREA START --> 
					<div class="mobile-menu-area">
						<div class="container">
							<div class="row">
								<div class="col-md-12">
								<div class="mobile-area">
									<div class="mobile-menu">
										<nav id="mobile-nav">
											<ul>
												<li><a href="{% url 'home' %}">Home </a></li>
												<li><a href="{% url 'shop_list' %}">SHOP</a>
												<!-- Mega Menu Four Column -->
												<div class="mega-menu">
													{% for category in categories%}
													<span>
														<a href="{% url 'shop_list' %}?category={{category.category_name}}" class="mega-title">{{ category.category_name }}</a>
														<a href="#"><img alt="{{category.category_name}}" src="{{category.image.url}}"/></a>
														{% for subcategory in category.subcategories.all %}
														{% if subcategory.is_listed %}
														<a href="{% url 'shop_list' %}?category={{category.category_name}}&subcategory={{subcategory.subcategory_name}}">{{ subcategory.subcategory_name}}</a>
														{% endif %}
														{% endfor %}
													</span>
													{% endfor %}
												</div>
												</li>
												<li><a href="{% url 'user_account'%}"> Account </a>
												</li>
												<li><a href="{% url 'contact_us' %}"> Contact Us </a></li>
											</ul>
										</nav>
									</div>	
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- MOBILE-MENU-AREA END  -->
					<div class="col-md-2 col-sm-2">
						<div class="menu-right-area">
							<ul>
								<li>
									<a href="#" class="cart-toggler search-icon">
										<i class="fa fa-search"></i>
									</a>
									<div class="header-bottom-search">
										<form method="POST" action="#" class="search-box">
											<div>
												<input type="text" autocomplete="off" placeholder="Search" value="">
											</div>
										</form>						            
									</div>
								</li>
								<li>
									<a href="{% url 'cart_detail' %}" class="cart-toggler mini-cart-icon">
										<i class="fa fa-shopping-cart"></i>
										{% if cart_item_count > 0 %}
										<span>{{ cart_item_count }}</span>
										{% endif %}
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- ORDER DETAILS START -->
		<div class="order-details-container">
			<h2 class="section-heading">Order Details</h2>
			
			<div style="display: flex; justify-content: space-between; flex-wrap: wrap;">
				<div style="flex: 1; min-width: 300px; margin-right: 20px;">
					<div class="card">
						<div class="card-header">
							<h4 style="margin: 0;">Order Summary</h4>
						</div>
						<div class="card-body">
							<p><strong>Order ID:</strong> {{ order.order_unique_id }} ({{order.payment_status}})</p>
							<p><strong>Order Date:</strong> {{ order.order_date }}</p>
							<p><strong>Selling Amount:</strong> ₹ {{ order.get_subtotal }}</p>
							{% if order.discount_amount %}
							<p><strong>Discount Amount:</strong> ₹ {{ order.discount_amount }} (Coupon: {{ order.coupon.code }})</p>
							{% endif %}
							<p><strong>Total Amount:</strong> ₹ {{ order.total_amount }}</p>
							<p><strong>Payment Method:</strong> {{ order.get_payment_method_display }} ({{order.payment_status}})</p>
						</div>
					</div>
				</div>
				
				<div style="flex: 1; min-width: 300px;">
					<div class="card">
						<div class="card-header">
							<h4 style="margin: 0;">Delivery Address</h4>
						</div>
						<div class="card-body">
							<p><strong>Name:</strong> {{ order.delivery_name }}</p>
							<p><strong>Address:</strong> {{ order.delivery_address_line }}, {{ order.delivery_city }}, {{ order.delivery_state }} - {{ order.delivery_pin }}</p>
							<p><strong>Post Office:</strong> {{ order.delivery_post_office }}</p>
							<p><strong>Phone:</strong> {{ order.delivery_phone_number }}</p>
							{% if order.delivery_landmark %}
								<p><strong>Landmark:</strong> {{ order.delivery_landmark }}</p>
							{% endif %}
						</div>
					</div>
				</div>
			</div>
			{% if order|is_paid_or_pending_cod %}
			<div class="ordered-items">
				<h4 class="section-heading">Ordered Items</h4>
				<div class="table-responsive">
					<table class="table">
						<thead>
							<tr>
								<th>Product</th>
								<th>Image</th>
								<th>Color/Size</th>
								<th>Quantity</th>
								<th>Price</th>
								<th>Total</th>
								<th>Status</th>
								<th>Action</th>
							</tr>
						</thead>
						<tbody>
							{% for item in order.order_items.all %}
							<tr>
								<td data-label="Product">{{ item.product_size.product_data.product_id.product_name }}</td>
								<td data-label="Image">
									<img src="{{ item.product_size.product_data.image_1.url }}" alt="{{ item.product_size.product_data.product_id.product_name }}" class="order-image">
								</td>
								<td data-label="Color/Size">{{ item.product_size.product_data.color_name }}/{{ item.product_size.size }}</td>
								<td data-label="Quantity">{{ item.quantity }}</td>
								<td data-label="Price">₹ {{ item.price }}</td>
								<td data-label="Total">₹ {{ item.get_total_item_price }}</td>
								<td data-label="Status">
									<span class="status-badge status-{{ item.status|lower }}">{{ item.status }}</span>
								</td>
								<td data-label="Action">
									{% if item.status|not_in_list:"Delivered,Cancelled,Returned,Return Confirmed,Return Processing,Waiting For Pickup,Return Completed" %}
									<form method="post" id="cancel-form-{{ item.id }}" action="{% url 'cancel_order_item' item.id %}" class="action-form">
										{% csrf_token %}
										<button type="button" class="btn-action btn-cancel" onclick="confirmCancel({{ item.id }})" {% if item.status == 'Cancelled' %}disabled{% endif %}>Cancel</button>
									</form>
									{% endif %}
									{% if item.status == 'Delivered' %}
									<form method="post" id="return-form-{{ item.id }}" action="{% url 'return_order_item' item.id %}" class="action-form">
										{% csrf_token %}
										<button type="button" class="btn-action btn-return" onclick="confirmReturn({{ item.id }})" {% if item.status == 'Returned' %}disabled{% endif %}>Return</button>
									</form>
									{% endif %}
								</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
			</div>
			{% else %}
			<div class="retry-payment">
				<button type="button" class="btn-action btn-return" id="retry-payment-btn" data-order-id="{{ order.id }}">Retry Payment</button>
			</div>
			{% endif %}
			
			{% if order.payment_status == 'Paid' %}
			<div class="invoice-download">
				<a href="{% url 'download_invoice' order.id %}" class="btn-action btn-download">Download Invoice</a>
			</div>
			{% endif %}
			
			<div class="back-to-orders">
				<a href="{% url 'user_account' %}" class="btn-primary">Back to Orders</a>
			</div>
		</div>
		<!-- ORDER DETAILS END -->
		
		<!-- OUR BRAND AREA START -->
		<section class="our-brand-area">
			<div class="container">
				<div class="text-center">
					<div class="section-titel">
						<h3>OUR BRANDS</h3>
					</div>
				</div>
				<div class="row blog-area">
					<div id="ourbrand-owl">
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-1.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-2.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-3.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-4.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-5.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-3.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-1.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-2.jpg' %}" alt="" /></div>
					</div>
				</div>
			</div>
		</section>
		<!-- OUR BRAND AREA END -->

		<!-- Footer Top Area Start -->
		<div class="footer-top">
			<div class="container">
				<div class="row">
					<div class="col-md-4 col-sm-4">
						<div class="social-icon">
							<ul>
								<li><a href="#"><i class="fa fa-facebook"></i></a></li>
								<li><a href="#"><i class="fa fa-rss"></i></a></li>
								<li><a href="#"><i class="fa fa-instagram"></i></a></li>
								<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
								<li><a href="#"><i class="fa fa-youtube"></i></a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-8 col-sm-8">
						<div class="foteer-news">
							<h3>NEWSLETTER</h3>
							<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed</p>
						</div>
						<div class="search-input">
							<form action="#">
								<input type="text" placeholder="Enter your keyword...">
								<button class="search-button" type="submit" value="Submit">Subcribe</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Footer Top Area End -->
		<!-- Footer Middle Area Start -->
		<section class="footer-middle">
			<div class="container">
				<div class="row">
					<div class="col-md-3 col-sm-4 col-xs-12 xs-res-mrbtm">
						<div class="footer-menu">
							<h4>MY ACCOUNT</h4>
							<ul>
								<li><a href="#">Login</a></li>
								<li><a href="#">My Account</a></li>
								<li><a href="#">My Cart</a></li>
								<li><a href="#">Wishlist</a></li>
								<li><a href="#">Checkout</a></li>
								<li><a href="#">Userinfor</a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-3 hidden-sm hidden-xs">
						<div class="footer-menu">
							<h4>INFORMATION</h4>
							<ul>
								<li><a href="#">Sitemap</a></li>
								<li><a href="#">Privacy Policy</a></li>
								<li><a href="#">Your Account</a></li>
								<li><a href="#">Advanced Search</a></li>
								<li><a href="#">Affiliates</a></li>
								<li><a href="#">Group Sales</a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-3 col-sm-4 col-xs-12 xs-res-mrbtm">
						<div class="footer-menu">
							<h4>CONTACT US</h4>
							<ul>
								<li><a href="#">Product Recall</a></li>
								<li><a href="#">Gift Vouchers</a></li>
								<li><a href="#">Returns and Exchanges</a></li>
								<li><a href="#">Shipping Options</a></li>
								<li><a href="#">Blogs</a></li>
								<li><a href="#">Help & Faqs</a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-3 col-sm-4 col-xs-12">
						<div class="address-area">
							<a href="{% url 'home' %}"><img src="{% static 'assets/img/home-1/logo_dg_footer.png' %}" alt="" /></a>
							<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard.</p>
							<div class="contact-details">
								<ul>
									<li><i class="fa fa-phone"></i>+91 7428730894</li>
									<li><i class="fa fa-envelope-o"></i> dgshoes930@gmail.com</li>
									<li><i class="fa fa-map-marker"></i> Kinfra, Malappuram,Kerala,India						</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>



		</section>
		<!-- Footer Middle Area End -->
		<!-- Footer Bottom Area Start -->
		<div class="footer-bottom-area">
			<div class="container">
				<div class="row ">
					<div class="col-md-6 col-sm-6 col-xs-12">
						<p>Copyright &copy;  <a href="http://www.devitems.com/"> Devitems. </a> All Rights Reserved.</p>
					</div>
					<div class="col-md-6 col-sm-6 col-xs-12">
						<img src="{% static 'assets/img/other-pg/payment.png' %}" alt="" />
					</div>
				</div>
			</div>
		</div>
		<!-- Footer Bottom Area End -->


		
		
		<!-- all js here -->
		<!-- jquery latest version -->
        <script src="{% static 'assets/js/vendor/jquery-1.12.0.min.js' %}"></script>
		<!-- bootstrap js -->
        <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
		<!-- owl.carousel js -->
        <script src="{% static 'assets/js/owl.carousel.min.js' %}"></script>
		<!-- meanmenu js -->
        <script src="{% static 'assets/js/jquery.meanmenu.js' %}"></script>
        <!-- Nivo slider js  --> 		
		<script src="{% static  'assets/lib/js/jquery.nivo.slider.js' %}" type="text/javascript"></script>
		<script src="{% static 'assets/lib/home.js' %}" type="text/javascript"></script>
		<!-- count down js  -->
		<script src="{% static 'assets/js/jquery.countdown.js' %}"></script>
		<!-- jquery-ui js -->
        <script src="{% static 'assets/js/jquery-ui.min.js' %}"></script>
		<!-- wow js -->
        <script src="{% static 'assets/js/wow.min.js' %}"></script>
		<!-- plugins js -->
        <script src="{% static 'assets/js/plugins.js' %}"></script>
		<!-- main js -->
        <script src="{% static 'assets/js/main.js' %}"></script>

		{% comment %} <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> {% endcomment %}
		{% comment %} <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.0/js/bootstrap.bundle.min.js"></script> {% endcomment %}

		<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

		<!--Sweet Alert Script-->
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
		<script>
			function confirmCancel(orderId) {
				Swal.fire({
					title: 'Are you sure?',
					text: "You won't be able to revert this!",
					icon: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Yes, cancel it!'
				}).then((result) => {
					if (result.isConfirmed) {
						document.getElementById('cancel-form-' + orderId).submit();
					}
				})
			}
		
			function confirmReturn(orderId) {
				Swal.fire({
					title: 'Are you sure?',
					text: "You can return this item!",
					icon: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Yes, return it!'
				}).then((result) => {
					if (result.isConfirmed) {
						document.getElementById('return-form-' + orderId).submit();
					}
				})
			}
		</script>


		<!--Retry Razorpay Payment-->
		<script>
		document.getElementById('retry-payment-btn').addEventListener('click', function() {
			var orderId = this.getAttribute('data-order-id');
			fetch('/retry-payment/' + orderId + '/')
				.then(response => response.json())
				.then(data => {
					if (data.error) {
						alert(data.error);
					} else {
						var options = {
							"key": data.key,
							"amount": data.amount,
							"currency": data.currency,
							"name": "Your Company Name",
							"description": "Order Payment",
							"order_id": data.id,
							"handler": function (response) {
								verifyPayment(response, data.order_id);
							},
							"prefill": {
								"name": "{{ request.user.get_full_name }}",
								"email": "{{ request.user.email }}",
							},
							"theme": {
								"color": "#F37254"
							}
						};
						var rzp = new Razorpay(options);
						rzp.open();
					}
				})
				.catch(error => {
					console.error('Error:', error);
					alert('An error occurred. Please try again.');
				});
		});
		
		function verifyPayment(response, orderId) {
			fetch('/verify-payment/', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
					'X-CSRFToken': getCookie('csrftoken')
				},
				body: JSON.stringify({
					razorpay_payment_id: response.razorpay_payment_id,
					razorpay_order_id: response.razorpay_order_id,
					razorpay_signature: response.razorpay_signature,
					order_id: orderId
				})
			})
			.then(response => response.json())
			.then(data => {
				if (data.success) {
					window.location.href = data.redirect_url;
				} else {
					alert('Payment verification failed. Please try again.');
				}
			})
			.catch(error => {
				console.error('Error:', error);
				alert('An error occurred during payment verification. Please contact support.');
			});
		}
		
		function getCookie(name) {
			let cookieValue = null;
			if (document.cookie && document.cookie !== '') {
				const cookies = document.cookie.split(';');
				for (let i = 0; i < cookies.length; i++) {
					const cookie = cookies[i].trim();
					if (cookie.substring(0, name.length + 1) === (name + '=')) {
						cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
						break;
					}
				}
			}
			return cookieValue;
		}
		</script>


	</body>

<!-- Mirrored from demo.hasthemes.com/fowler-preview/fowler/account.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jun 2024 10:16:24 GMT -->
</html>