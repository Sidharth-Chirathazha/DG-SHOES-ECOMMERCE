<!doctype html>

{% load static %}
{% load custom_filters%}
<html class="no-js" lang="">
    
<!-- Mirrored from demo.hasthemes.com/fowler-preview/fowler/account.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jun 2024 10:16:24 GMT -->
<head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Fowler - Shoes Store HTML Template</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico in the root directory -->
		<link rel="apple-touch-icon" href="apple-touch-icon.png">
        <link rel="shortcut icon" type="image/x-icon" href="{% static 'assets/img/favicon.ico' %}">

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
		
		<!-- Google Fonts -->
		<link href='https://fonts.googleapis.com/css?family=Raleway:400,300,500,600,700,800,900' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Roboto:400,300,500,700,900' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Lato:400,700,900,300' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
		<!-- all css here -->
		<!-- bootstrap v3.3.6 css -->
        <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">
		<!-- animate css -->
        <link rel="stylesheet" href="{% static 'assets/css/animate.css' %}">
        <!-- nivo slider CSS -->
		<link rel="stylesheet" href="{% static 'assets/lib/css/nivo-slider.css' %}" type="text/css" />
		<link rel="stylesheet" href="{% static 'assets/lib/css/preview.css' %}" type="text/css" media="screen" />
		<!-- jquery-ui.min css -->
        <link rel="stylesheet" href="{% static 'assets/css/jquery-ui.min.css' %}">
		<!-- meanmenu css -->
        <link rel="stylesheet" href="{% static 'assets/css/meanmenu.min.css' %}">
		<!-- owl.carousel css -->
        <link rel="stylesheet" href="{% static 'assets/css/owl.carousel.css' %}">
		<!-- font-awesome css -->
        <link rel="stylesheet" href="{% static 'assets/css/font-awesome.min.css' %}">
		<!-- style css -->
		<link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
		<!-- responsive css -->
        <link rel="stylesheet" href="{% static 'assets/css/responsive.css' %}">
		<!-- modernizr css -->
		<link rel="stylesheet" href="{% static 'assets/css/account-section.css' %}">

		<link rel="stylesheet" href="{% static 'assets/css/top-nav.css' %}">
        <script src="{% static 'assets/js/vendor/modernizr-2.8.3.min.js' %}"></script>

		{% comment %} <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.0/css/bootstrap.min.css">
    	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">	 {% endcomment %}

		<style>

			.bannerhead-area {

				background: rgba(0, 0, 0, 0) url('{% static 'assets/img/banner-new.jpg' %}') no-repeat scroll center center;
				position: relative;

			  }

			.section-titel {
			display: block;
			overflow: hidden;
			padding-bottom: 30px;
			position: relative;
			}

		.section-titel::after {
			background: rgba(0, 0, 0, 0) url('{% static 'assets/img/sec-titel.png' %}') no-repeat scroll 0 0;
			content: "";
			height: 100%;
			left: 39%;
			position: absolute;
			top: 30px;
			width: 100%;
			}
		.section-titel > h3 {
			color: #666666;
			font-family: "Montserrat",sans-serif;
			font-size: 20px;
			font-weight: 400;
			text-transform: uppercase;
			}
		.hot-deals-area {
			background-attachment: scroll;
			background-image: url("{% static 'assets/img/home-1/hot-deals.jpg' %}");
			background-position: center center;
			background-size: cover;
			}





			


		</style>
    </head>
    <body class="other-page">
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

       <!-- HEADER TOP AREA START -->
		<section class="header-top-area">
			<div class="container">
				<div class="header-content">
					<div class="user-info">
						{% if user.is_authenticated %}
							<i class="fa fa-user"></i>
							<span class="welcome-text">Welcome, {{ user.first_name }}</span>
							<a href="{% url 'logout' %}" class="auth-link">LOGOUT</a>
						{% else %}
							<a href="{% url 'login' %}" class="auth-link">LOG IN</a>
						{% endif %}
					</div>
				</div>
			</div>
		</section>
        <!-- HEADER TOP AREA END -->
		<!-- MENU AREA START -->
		<div class="menu-area">
			<div class="container">
				<div class="row">
					<div class="col-md-2 col-sm-2">
						<div class="logo-area">
							<a href="{% url 'home' %}"><img src="{% static 'assets/img/home-1/logo_dg_footer.png' %}" width="110" height="50" alt="" /></a>
						</div>
					</div>
					<div class="col-md-8 col-sm-8">
						<div class="main-menu">
							<ul class="list-inline">
							  <li class="expand active"><a href="{% url 'home' %}">HOME</a>
							  </li>
							  <li><a href="{% url 'shop_list' %}">SHOP</a>
								<!-- Mega Menu Four Column -->
								<div class="mega-menu">
									{% for category in categories%}
									<span>
										<a href="{% url 'shop_list' %}?category={{category.category_name}}" class="mega-title">{{ category.category_name }}</a>
										<a href="#"><img alt="{{category.category_name}}" src="{{category.image.url}}"/></a>
										{% for subcategory in category.subcategories.all %}
										{% if subcategory.is_listed %}
										<a href="{% url 'shop_list' %}?category={{category.category_name}}&subcategory={{subcategory.subcategory_name}}">{{ subcategory.subcategory_name}}</a>
										{% endif %}
										{% endfor %}
									</span>
									{% endfor %}
								</div>
							  </li>
							  <li class="expand"><a href="{% url 'user_account' %}">ACCOUNT</a>
							  </li>
							  <li><a href="{% url 'contact_us' %}">CONTACT</a></li>
							</ul>
						</div>
					</div>
					<!-- MOBILE-MENU-AREA START --> 
					<div class="mobile-menu-area">
						<div class="container">
							<div class="row">
								<div class="col-md-12">
								<div class="mobile-area">
									<div class="mobile-menu">
										<nav id="mobile-nav">
											<ul>
												<li><a href="{% url 'home' %}">Home </a></li>
												<li><a href="{% url 'shop_list' %}">SHOP</a>
												<!-- Mega Menu Four Column -->
												<div class="mega-menu">
													{% for category in categories%}
													<span>
														<a href="{% url 'shop_list' %}?category={{category.category_name}}" class="mega-title">{{ category.category_name }}</a>
														<a href="#"><img alt="{{category.category_name}}" src="{{category.image.url}}"/></a>
														{% for subcategory in category.subcategories.all %}
														{% if subcategory.is_listed %}
														<a href="{% url 'shop_list' %}?category={{category.category_name}}&subcategory={{subcategory.subcategory_name}}">{{ subcategory.subcategory_name}}</a>
														{% endif %}
														{% endfor %}
													</span>
													{% endfor %}
												</div>
												</li>
												<li><a href="{% url 'user_account'%}"> Account </a>
												</li>
												<li><a href="{% url 'contact_us' %}"> Contact Us </a></li>
											</ul>
										</nav>
									</div>	
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- MOBILE-MENU-AREA END  -->
					<div class="col-md-2 col-sm-2">
						<div class="menu-right-area">
							<ul>
								<li>
									<a href="#" class="cart-toggler search-icon">
										<i class="fa fa-search"></i>
									</a>
									<div class="header-bottom-search">
										<form method="POST" action="#" class="search-box">
											<div>
												<input type="text" autocomplete="off" placeholder="Search" value="">
											</div>
										</form>						            
									</div>
								</li>
								<li>
									<a href="{% url 'cart_detail' %}" class="cart-toggler mini-cart-icon">
										<i class="fa fa-shopping-cart"></i>
										{% if cart_item_count > 0 %}
										<span>{{ cart_item_count }}</span>
										{% endif %}
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- MENU AREA END -->
		<!-- BANNER AREA STRAT -->
		<section class="bannerhead-area">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<div class="banner-heading">
							<h2 style="color:black;">My Account</h2>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- BANNER AREA END -->


		<!-- MY ACCOUNT AREA START -->
		<div class="my-account-area">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<h1 class="heading-title">My Account </h1>
						<p>Welcome to your account. Here you can manage all of your personal information and orders.</p>
					</div>
				</div>
				<div class="row">
					<!-- Left Sidebar -->
					<div class="col-md-3">
						<div class="account-sidebar">
							<ul>
								<li><a href="#personal-info" class="active"><i class="fa fa-user"></i> My Personal Information</a></li>
								<li><a href="#add-address"><i class="fa fa-plus-circle"></i> Add Address</a></li>
								<li><a href="#my-addresses"><i class="fa fa-map-marker"></i> My Addresses</a></li>
								<li><a href="#my-wishlists"><i class="fa fa-heart"></i> My Wishlists</a></li>
								<li><a href="#order-history"><i class="fa fa-list-ol"></i> Order History</a></li>
								<li><a href="#my-wallet"><i class="fa fa-credit-card"></i> My Wallet</a></li>
								<li><a href="#change-password"><i class="fa fa-lock"></i> Change Password</a></li>
							</ul>
						</div>
					</div>


					<div class="col-md-9">
                		<div class="account-content">


							<!-- Personal Information Section -->
							<div id="personal-info" class="account-section active">
								<h4>Your Personal Information</h4>
										
								<!-- Edit Button -->
								<div style="display: flex; justify-content: flex-end; margin-bottom: 10px;">
									<button id="edit-btn" class="btn btn-primary" style="background-color: #FF7575; color: white; border: none; padding: 5px 10px; margin-right: 10px; cursor: pointer;">Edit</button>
								</div>			

								<!-- Display Mode -->
								<div id="display-mode">
									<p><strong>Your Full Name:</strong> <span id="user-name">{{ user.first_name }} {{user.last_name}}</span></p>
									<p><strong>Gender:</strong> <span id="user-gender">{{ user.get_gender_display }}</span></p>
									<p><strong>Date-of-birth:</strong> <span id="user-dob">{{ user.date_of_birth }}</span></p>
									<p><strong>E-mail address:</strong> <span id="user-email">{{ user.email }}</span></p>
									<p><strong>Phone:</strong> <span id="user-phone">{{ user.phone_number }}</span></p>
									<p><strong>Refferal Code:</strong> <span >{{user.referral_code}}</span></p>
									
								</div>

								<!-- Edit Mode -->
								<div id="edit-mode" style="display: none;">
									<form id="user-form">
										<div class="form-row gender-row">
											<label><span class="required">*</span>Gender</label>
											<div class="radio-inline">
												<label>
													<input type="radio" name="gender" value="M" {% if user.gender == 'M' %}checked{% endif %}/> Male
												</label>
											</div>
											<div class="radio-inline">
												<label>
													<input type="radio" name="gender" value="F" {% if user.gender == 'F' %}checked{% endif %}/> Female
												</label>
											</div>
										</div>
										<p class="form-row">
											<label><span class="required">*</span>First Name</label>
											<input type="text" name="first_name" value="{{ user.first_name }}" />
											<span class="error-message" id="first-name-error"></span>
										</p>
										<p class="form-row">
											<label><span class="required">*</span>Last Name</label>
											<input type="text" name="last_name" value="{{ user.last_name }}" />
											<span class="error-message" id="last-name-error"></span>
										</p>
										<p class="form-row">
											<label><span class="required">*</span>Date-of-birth</label>
											<input type="date" id="dob" name="dob" value="{{ user.date_of_birth|date:'Y-m-d' }}" />
											<span class="error-message" id="dob-error"></span>
										</p>
										<p class="form-row">
											<label><span class="required">*</span>Phone</label>
											<input type="text" name="phone_number" value="{{ user.phone_number }}" />
											<span class="error-message" id="phone-error"></span>
										</p>
										<div style="display: flex; justify-content: flex-end;">
											<button type="button" id="cancel-btn" class="btn btn-secondary mr-2" style="background-color: #FF7575; color: white; border: none; padding: 5px 10px; margin-right: 10px; cursor: pointer;">Cancel</button>
											<button type="button" id="save-btn" class="btn btn-primary" style="background-color: #FF7575; color: white; border: none; padding: 5px 10px; margin-right: 10px; cursor: pointer;">Save</button>
										</div>
									</form>
								</div>
							</div>
							<!-- Personal Information End -->

							<!-- Add Address Start -->
							<div id="add-address" class="account-section">
								<h4>Add New Address</h4>
								<form id="address-form" method="post" action="{% url 'add_address' %}">
									{% csrf_token %}
									<input type="hidden" name="next" value="{{ request.GET.next }}">
									<p class="form-row">
										<label>Address Title<span class="required">*</span></label>
										<input type="text" id="address_title" name="address_title" value="{{ address_title }}">
										<span class="error">{{ errors.address_title }}</span>
									</p>
									<p class="form-row">
										<label>Your Full Name<span class="required">*</span></label>
										<input type="text" id="full_name" name="full_name" value="{{ full_name }}">
										<span class="error">{{ errors.full_name }}</span>
									</p>
									<p class="form-row">
										<label>Address<span class="required">*</span></label>
										<input type="text" id="address" name="address" value="{{ address }}">
										<span class="error">{{ errors.address }}</span>
									</p>
									<p class="form-row">
										<label>Post Office<span class="required">*</span></label>
										<input type="text" id="post_office" name="post_office" value="{{ post_office }}">
										<span class="error">{{ errors.post_office }}</span>
									</p>
									<p class="form-row">
										<label>Pincode<span class="required">*</span></label>
										<input type="text" id="pincode" name="pincode" value="{{ pincode }}">
										<span class="error">{{ errors.pincode }}</span>
									</p>
									<p class="form-row">
										<label>City<span class="required">*</span></label>
										<input type="text" id="city" name="city" value="{{ city }}">
										<span class="error">{{ errors.city }}</span>
									</p>
									<p class="form-row">
										<label>State<span class="required">*</span></label>
										<input type="text" id="state" name="state" value="{{ state }}">
										<span class="error">{{ errors.state }}</span>
									</p>
									<p class="form-row">
										<label>Phone Number<span class="required">*</span></label>
										<input type="text" id="phone" name="phone" value="{{ phone }}">
										<span class="error">{{ errors.phone }}</span>
									</p>
									<p class="form-row">
										<label>Landmark</label>
										<input type="text" id="landmark" name="landmark" value="{{ landmark }}">
										<span class="error">{{ errors.landmark }}</span>
									</p>
									<button type="submit" id="save-address-btn" class="btn btn-default button button-small">
										<span>
											Save
											<i class="fa fa-chevron-right"></i>
										</span>
									</button>
								</form>
							</div>

							<!-- My Addresses Section -->
							<div id="my-addresses" class="account-section">
								<h4>My Addresses</h4>		
								<!-- Address List -->
								<div id="address-list" style="display: flex; flex-wrap: wrap; gap: 20px;">
									{% for address in user_addresses %}
										<div class="address-item" id="address-item-{{ address.id }}" style="flex: 1 0 300px; max-width: 400px; border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
											<h3>{{ address.address_title }}</h3>
											<p>{{ address.name }}</p>
											<p>{{ address.address_line }}, {{ address.city }}, {{ address.state }} - {{ address.pin }}</p>
											<p>Phone: {{ address.phone_number }}</p>
											<p>Post Office: {{ address.post_office }}</p>
											{% if address.landmark %}
												<p>Landmark: {{ address.landmark }}</p>
											{% endif %}
											<button class="edit-address-btn" data-id="{{ address.id }}" style="background-color: #FF7575; color: white; border: none; padding: 5px 10px; margin-right: 10px; cursor: pointer;">Edit</button>
											<form method="post" action="{% url 'delete_address' address.id %}" style="display: inline;">
												{% csrf_token %}
												<button type="submit" class="delete-address-btn" onclick="return confirm('Are you sure you want to delete this address?')" style="background-color: #FF7575; color: white; border: none; padding: 5px 10px; cursor: pointer;">Delete</button>
											</form>
										</div>
									{% empty %}
										<p>You have no saved addresses.</p>
									{% endfor %}
								</div>

								<!-- Address Form (initially hidden) -->
								<div id="address-edit-container" style="display: none;">
									<h4>Edit Address</h4>
									<form id="address-edit-form" method="post" action="{% url 'edit_address' %}">
										{% csrf_token %}
										<input type="hidden" name="address_id" id="address_id">
										<p class="form-row">
											<label><span class="required">*</span>Name</label>
											<input type="text" id="full_name" name="full_name" required>
											<span class="error"></span>
										</p>
										<p class="form-row">
											<label><span class="required">*</span>Address Title</label>
											<input type="text" name="address_title" id="address_title" required>
											<span class="error"></span>
										</p>
										<p class="form-row">
											<label><span class="required">*</span>State</label>
											<input type="text" name="state" id="state" required>
											<span class="error"></span>
										</p>
										<p class="form-row">
											<label><span class="required">*</span>City</label>
											<input type="text" name="city" id="city" required>
											<span class="error"></span>
										</p>
										<p class="form-row">
											<label><span class="required">*</span>PIN</label>
											<input type="text" id="pincode" name="pincode" required pattern="\d{6}" title="PIN must be exactly 6 digits">
											<span class="error"></span>
										</p>
										<p class="form-row">
											<label><span class="required">*</span>Post Office</label>
											<input type="text" id="post_office" name="post_office" required>
											<span class="error"></span>
										</p>
										<p class="form-row">
											<label><span class="required">*</span>Phone Number</label>
											<input type="tel" id="phone" name="phone" required>
											<span class="error"></span>
										</p>
										<p class="form-row">
											<label><span class="required">*</span>Address Line</label>
											<textarea name="address_line" required></textarea>
											<span class="error"></span>
										</p>
										<p class="form-row">
											<label>Landmark</label>
											<input type="text" name="landmark" id="landmark">
											<span class="error"></span>
										</p>
										<div style="display: flex; justify-content: flex-end;">
											<button type="button" id="cancel-edit-btn" class="btn btn-secondary mr-2">Cancel</button>
											<button type="submit" class="btn btn-primary" style="background-color: #FF7575; color: white; border: none; padding: 5px 10px; margin-right: 10px; cursor: pointer;">Save Address</button>
										</div>
									</form>
								</div>
							</div>

							<!-- My wishlists -->
							<div id="my-wishlists" class="account-section">
								<h4>My Wishlists</h4>
								<a href="{% url 'wishlist' %}"><p class="coupon-text">Go to Wishlist</p></a>
								<!-- Add wishlist items here -->
							</div>

							<!-- Order History -->
							<div id="order-history" class="account-section">
								<h4>Order History</h4>
								<div class="order-history">
									{% if user_orders %}
										<div class="table-responsive">
											<table class="table table-striped">
												<thead>
													<tr>
														<th>Order ID</th>
														<th>Item</th>
														<th>Color/Size</th>
														<th>Quantity</th>
														<th>Total Price</th>
														<th>Status</th>
														<th>Actions</th>
													</tr>
												</thead>
												<tbody>
													{% for order in user_orders %}
														{% for item in order.order_items.all %}
															<tr>
																<td><a href="{% url 'order_details' order.id %}">{{ order.order_unique_id }}</a></td>
																<td><img src="{{ item.product_size.product_data.image_1.url }}" alt="{{ item.product_size.product_data.product_id.product_name }}" width="50" height="50"></td>
																<td>{{ item.product_size.product_data.color_name }}/{{ item.product_size.size }}</td>
																<td>{{ item.quantity }}</td>
																<td>₹ {{ item.get_total_item_price }}</td>
																<td>{{ item.status }}</td>
																{% if order|is_paid_or_pending_cod %}
																<td>
																	{% if item.status|not_in_list:"Delivered,Cancelled,Returned,Return Confirmed,Return Processing,Waiting For Pickup,Return Completed" %}
																		<form method="post" id="cancel-form-{{ item.id }}" action="{% url 'cancel_order_item' item.id %}">
																			{% csrf_token %}
																			<button type="button" class="btn btn-danger btn-sm" onclick="confirmCancel({{ item.id }})" {% if item.status == 'Cancelled' %}disabled{% endif %}>Cancel</button>
																		</form>
																	{% endif %}
																	{% if item.status == 'Delivered' %}
																		<form method="post" id="return-form-{{ item.id }}" action="{% url 'return_order_item' item.id %}">
																			{% csrf_token %}
																			<button type="button" class="btn btn-warning btn-sm" onclick="confirmReturn({{ item.id }})" {% if item.status == 'Returned' %}disabled{% endif %}>Return</button>
																		</form>
																	{% endif %}
																</td>
																{% else %}
																<td>
																	Payment Failed
																</td>
																{% endif %}
															</tr>
														{% endfor %}
													{% endfor %}
												</tbody>
											</table>
										</div>
										<!-- Order History End -->
							
										<!-- Pagination -->
										<nav aria-label="Page navigation">
											<ul class="pagination justify-content-center">
												{% if user_orders.has_previous %}
													<li class="page-item">
														<a class="page-link" href="?page=1" aria-label="First">
															<span aria-hidden="true">&laquo;&laquo;</span>
														</a>
													</li>
													<li class="page-item">
														<a class="page-link" href="?page={{ user_orders.previous_page_number }}" aria-label="Previous">
															<span aria-hidden="true">&laquo;</span>
														</a>
													</li>
												{% endif %}
							
												<li class="page-item active">
													<span class="page-link">
														Page {{ user_orders.number }} of {{ user_orders.paginator.num_pages }}
													</span>
												</li>
							
												{% if user_orders.has_next %}
													<li class="page-item">
														<a class="page-link" href="?page={{ user_orders.next_page_number }}" aria-label="Next">
															<span aria-hidden="true">&raquo;</span>
														</a>
													</li>
													<li class="page-item">
														<a class="page-link" href="?page={{ user_orders.paginator.num_pages }}" aria-label="Last">
															<span aria-hidden="true">&raquo;&raquo;</span>
														</a>
													</li>
												{% endif %}
											</ul>
										</nav>
									{% else %}
										<p class="alert alert-info">You have not placed any orders.</p>
									{% endif %}
								</div>
							</div>


							<!-- Wallet Section -->
							<div id="my-wallet" class="account-section">
								<h4>My Wallet</h4>
								<div class="wallet-balance">
									<h5>Current Balance</h5>
									<p class="balance">₹ {{ user_wallet.balance }}</p>
								</div>
								<div class="wallet-transactions">
									<h5>Transaction History</h5>
									<table class="table table-striped">
										<thead>
											<tr>
												<th>Date</th>
												<th>Type</th>
												<th>Amount</th>
												<th>Description</th>
											</tr>
										</thead>
										<tbody>
											{% for transaction in wallet_transactions %}
											<tr>
												<td>{{ transaction.timestamp|date:"Y-m-d H:i" }}</td>
												<td>{{ transaction.get_transaction_type_display }}</td>
												<td>₹ {{ transaction.amount }}</td>
												<td>{{ transaction.get_description_display }}</td>
											</tr>
											{% empty %}
											<tr>
												<td colspan="4">No transactions yet.</td>
											</tr>
											{% endfor %}
										</tbody>
									</table>
									<!-- Pagination for wallet transactions -->
									<div class="pagination">
										<span class="step-links">
											{% if wallet_transactions.has_previous %}
												<a href="?wallet_page=1">&laquo; first</a>
												<a href="?wallet_page={{ wallet_transactions.previous_page_number }}">previous</a>
											{% endif %}

											<span class="current">
												Page {{ wallet_transactions.number }} of {{ wallet_transactions.paginator.num_pages }}.
											</span>

											{% if wallet_transactions.has_next %}
												<a href="?wallet_page={{ wallet_transactions.next_page_number }}">next</a>
												<a href="?wallet_page={{ wallet_transactions.paginator.num_pages }}">last &raquo;</a>
											{% endif %}
										</span>
									</div>
								</div>
							</div>

							<!-- Change Password -->
							<div id="change-password" class="account-section">
								<h4>Change Password</h4>
								<form id="change-password-form">
									{% csrf_token %}
									<p class="form-row">
										<label><span class="required">*</span>Current Password</label>
										<input type="password" name="current_password" required/>
									</p>
									<p class="form-row">
										<label>New Password</label>
										<input type="password" name="new_password" required/>
									</p>
									<p class="form-row">
										<label>Confirmation</label>
										<input type="password" name="confirm_new_password" required/>
									</p>
									<button type="submit" class="btn btn-default button button-small">
										<span>
											Save
											<i class="fa fa-chevron-right"></i>
										</span>
									</button>
								</form>
								<div id="message"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- MY ACCOUNT AREA END -->

		<!-- OUR BRAND AREA START -->
		<section class="our-brand-area">
			<div class="container">
				<div class="text-center">
					<div class="section-titel">
						<h3>OUR BRANDS</h3>
					</div>
				</div>
				<div class="row blog-area">
					<div id="ourbrand-owl">
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-1.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-2.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-3.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-4.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-5.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-3.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-1.jpg' %}" alt="" /></div>
						<div class="col-md-12"><img src="{% static 'assets/img/other-pg/brand-logo-2.jpg' %}" alt="" /></div>
					</div>
				</div>
			</div>
		</section>
		<!-- OUR BRAND AREA END -->

		<!-- Footer Top Area Start -->
		<div class="footer-top">
			<div class="container">
				<div class="row">
					<div class="col-md-4 col-sm-4">
						<div class="social-icon">
							<ul>
								<li><a href="#"><i class="fa fa-facebook"></i></a></li>
								<li><a href="#"><i class="fa fa-rss"></i></a></li>
								<li><a href="#"><i class="fa fa-instagram"></i></a></li>
								<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
								<li><a href="#"><i class="fa fa-youtube"></i></a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-8 col-sm-8">
						<div class="foteer-news">
							<h3>NEWSLETTER</h3>
							<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed</p>
						</div>
						<div class="search-input">
							<form action="#">
								<input type="text" placeholder="Enter your keyword...">
								<button class="search-button" type="submit" value="Submit">Subcribe</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Footer Top Area End -->
		<!-- Footer Middle Area Start -->
		<section class="footer-middle">
			<div class="container">
				<div class="row">
					<div class="col-md-3 col-sm-4 col-xs-12 xs-res-mrbtm">
						<div class="footer-menu">
							<h4>MY ACCOUNT</h4>
							<ul>
								<li><a href="#">Login</a></li>
								<li><a href="#">My Account</a></li>
								<li><a href="#">My Cart</a></li>
								<li><a href="#">Wishlist</a></li>
								<li><a href="#">Checkout</a></li>
								<li><a href="#">Userinfor</a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-3 hidden-sm hidden-xs">
						<div class="footer-menu">
							<h4>INFORMATION</h4>
							<ul>
								<li><a href="#">Sitemap</a></li>
								<li><a href="#">Privacy Policy</a></li>
								<li><a href="#">Your Account</a></li>
								<li><a href="#">Advanced Search</a></li>
								<li><a href="#">Affiliates</a></li>
								<li><a href="#">Group Sales</a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-3 col-sm-4 col-xs-12 xs-res-mrbtm">
						<div class="footer-menu">
							<h4>CONTACT US</h4>
							<ul>
								<li><a href="#">Product Recall</a></li>
								<li><a href="#">Gift Vouchers</a></li>
								<li><a href="#">Returns and Exchanges</a></li>
								<li><a href="#">Shipping Options</a></li>
								<li><a href="#">Blogs</a></li>
								<li><a href="#">Help & Faqs</a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-3 col-sm-4 col-xs-12">
						<div class="address-area">
							<a href="{% url 'home' %}"><img src="{% static 'assets/img/home-1/logo_dg_footer.png' %}" alt="" /></a>
							<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard.</p>
							<div class="contact-details">
								<ul>
									<li><i class="fa fa-phone"></i>+91 7428730894</li>
									<li><i class="fa fa-envelope-o"></i> dgshoes930@gmail.com</li>
									<li><i class="fa fa-map-marker"></i> Kinfra, Malappuram,Kerala,India						</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>



		</section>
		<!-- Footer Middle Area End -->
		<!-- Footer Bottom Area Start -->
		<div class="footer-bottom-area">
			<div class="container">
				<div class="row ">
					<div class="col-md-6 col-sm-6 col-xs-12">
						<p>Copyright &copy;  <a href="http://www.devitems.com/"> Devitems. </a> All Rights Reserved.</p>
					</div>
					<div class="col-md-6 col-sm-6 col-xs-12">
						<img src="{% static 'assets/img/other-pg/payment.png' %}" alt="" />
					</div>
				</div>
			</div>
		</div>
		<!-- Footer Bottom Area End -->


		
		
		<!-- all js here -->
		<!-- jquery latest version -->
        <script src="{% static 'assets/js/vendor/jquery-1.12.0.min.js' %}"></script>
		<!-- bootstrap js -->
        <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
		<!-- owl.carousel js -->
        <script src="{% static 'assets/js/owl.carousel.min.js' %}"></script>
		<!-- meanmenu js -->
        <script src="{% static 'assets/js/jquery.meanmenu.js' %}"></script>
        <!-- Nivo slider js  --> 		
		<script src="{% static  'assets/lib/js/jquery.nivo.slider.js' %}" type="text/javascript"></script>
		<script src="{% static 'assets/lib/home.js' %}" type="text/javascript"></script>
		<!-- count down js  -->
		<script src="{% static 'assets/js/jquery.countdown.js' %}"></script>
		<!-- jquery-ui js -->
        <script src="{% static 'assets/js/jquery-ui.min.js' %}"></script>
		<!-- wow js -->
        <script src="{% static 'assets/js/wow.min.js' %}"></script>
		<!-- plugins js -->
        <script src="{% static 'assets/js/plugins.js' %}"></script>
		<!-- main js -->
        <script src="{% static 'assets/js/main.js' %}"></script>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		{% comment %} <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.0/js/bootstrap.bundle.min.js"></script> {% endcomment %}
		
		<!--Script(incuding fetch) for user information updating-->
		<script>
			document.addEventListener('DOMContentLoaded', function () {
				const editBtn = document.getElementById('edit-btn');
				const cancelBtn = document.getElementById('cancel-btn');
				const saveBtn = document.getElementById('save-btn');
				const displayMode = document.getElementById('display-mode');
				const editMode = document.getElementById('edit-mode');

				function clearErrors() {
					document.querySelectorAll('.error-message').forEach(function (el) {
						el.textContent = '';
					});
				}
		
				editBtn.addEventListener('click', function () {
					if (editMode.style.display === 'none') {
						displayMode.style.display = 'none';
						editMode.style.display = 'block';
						editBtn.textContent = 'Cancel';
					} else {
						displayMode.style.display = 'block';
						editMode.style.display = 'none';
						editBtn.textContent = 'Edit';
					}
				});
		
				cancelBtn.addEventListener('click', function () {
					displayMode.style.display = 'block';
					editMode.style.display = 'none';
					editBtn.textContent = 'Edit';
				});
		
				saveBtn.addEventListener('click', function () {
					const form = document.getElementById('user-form');
					const formData = new FormData(form);
		
					fetch('{% url 'update_user_info' %}', {
						method: 'POST',
						headers: {
							'X-CSRFToken': '{{ csrf_token }}',
							'Accept': 'application/json',
						},
						body: formData
					})
					.then(response => response.json())
					.then(data => {
						if (data.success) {
							document.getElementById('user-gender').textContent = formData.get('gender') === 'M' ? 'Male' : 'Female';
							document.getElementById('user-name').textContent = formData.get('first_name') + ' ' + formData.get('last_name');
							document.getElementById('user-dob').textContent = formData.get('dob');
							document.getElementById('user-phone').textContent = formData.get('phone_number');
							displayMode.style.display = 'block';
							editMode.style.display = 'none';
							editBtn.textContent = 'Edit';
						} else {
							// Display validation errors in corresponding fields
							if (data.error) {
								if (data.error.first_name) {
									document.getElementById('first-name-error').textContent = data.error.first_name;
								}
								if (data.error.last_name) {
									document.getElementById('last-name-error').textContent = data.error.last_name;
								}
								if (data.error.phone_number) {
									document.getElementById('phone-error').textContent = data.error.phone_number;
								}
								if (data.error.dob) {
									document.getElementById('dob-error').textContent = data.error.dob;
								}
								if (data.error.gender) {
									document.getElementById('gender-error').textContent = data.error.gender;
								}
							}else{
								alert('Failed to update information.');
							}				
						}
					})
					.catch(error => {
						console.error('Error:', error);
					});
				});
			});
			</script>
			<!--END-->

			{% comment %} <!--Script for Add Address Validation-->
			<script>

				document.addEventListener('DOMContentLoaded', function () {
					const addressForm = document.getElementById('address-form');
					const saveAddressBtn = document.getElementById('save-address-btn');
				
					if (addressForm && saveAddressBtn) {
						saveAddressBtn.addEventListener('click', function (e) {
							const addressTitle = document.getElementById('address-title').value;
							const fullName = document.getElementById('full-name').value;
							const address = document.getElementById('address').value;
							const postOffice = document.getElementById('post-office').value;
							const pincode = document.getElementById('pincode').value;
							const city = document.getElementById('city').value;
							const state = document.getElementById('state').value;
							const phone = document.getElementById('phone').value;
							const landmark = document.getElementById('landmark').value;
				
							const errors = validateAddressData(addressTitle, fullName, address, postOffice, pincode, city, state, phone, landmark);
				
							if (errors.length > 0) {
								e.preventDefault();  // Prevent form submission
								alert('Errors: ' + errors.join(', '));
							}
						});
				
						function validateAddressData(addressTitle, fullName, address, postOffice, pincode, city, state, phone, landmark) {
							const errors = [];
							const namePattern = /^[A-Za-z][A-Za-z ]*$/;
							const addressTitlePattern = /^[A-Za-z0-9][A-Za-z0-9 ]*$/;
							const addressPattern = /^[A-Za-z0-9][A-Za-z0-9\s!@#$%^&*()-_=+]*$/;
							const postOfficePattern = /^[A-Za-z][A-Za-z ]*$/;
							const pincodePattern = /^[1-9][0-9]{5}$/;
							const cityStatePattern = /^[A-Za-z][A-Za-z ]*$/;
							const phonePattern = /^[789][0-9]{9}$/;
							const landmarkPattern = /^[A-Za-z0-9][A-Za-z0-9\s!@#$%^&*()-_=+]*$/;
				
							if (!namePattern.test(fullName)) errors.push('Invalid Full Name');
							if (!addressTitlePattern.test(addressTitle)) errors.push('Invalid Address Title');
							if (!addressPattern.test(address)) errors.push('Invalid Address');
							if (!postOfficePattern.test(postOffice)) errors.push('Invalid Post Office');
							if (!pincodePattern.test(pincode)) errors.push('Invalid Pincode');
							if (!cityStatePattern.test(city)) errors.push('Invalid City');
							if (!cityStatePattern.test(state)) errors.push('Invalid State');
							if (!phonePattern.test(phone)) errors.push('Invalid Phone Number');
							if (!landmarkPattern.test(landmark)) errors.push('Invalid Landmark');
				
							return errors;
						}
					} else {
						console.error('Address form or save button not found.');
					}
				});
			</script>
			<!--END--> {% endcomment %}

			<!--Script for Edit address-->
			<script>
				document.addEventListener('DOMContentLoaded', function () {
					const addressList = document.getElementById('address-list');
					const addressEditContainer = document.getElementById('address-edit-container');
					const addressEditForm = document.getElementById('address-edit-form');
					const cancelEditBtn = document.getElementById('cancel-edit-btn');
				
					function showEditForm(addressId) {
						// Hide the specific address item
						const addressItem = document.getElementById(`address-item-${addressId}`);
						if (addressItem) {
							addressItem.style.display = 'none';
						}
						// Show the edit form
						addressEditContainer.style.display = 'block';
						
						 // Set the address_id in the hidden input field
						document.getElementById('address_id').value = addressId;
					}
				
					function hideEditForm() {
						// Show all address items
						const addressItems = document.querySelectorAll('.address-item');
						addressItems.forEach(item => item.style.display = 'block');
						// Hide the edit form
						addressEditContainer.style.display = 'none';
					}
				
					// Event listener for edit buttons
					addressList.addEventListener('click', function(e) {
						if (e.target.classList.contains('edit-address-btn')) {
							e.preventDefault();
							const addressId = e.target.dataset.id;
							fetch(`{% url 'get_address_details' %}?id=${addressId}`)
								.then(response => response.json())
								.then(address => {
									for (const key in address) {
										if (addressEditForm.elements[key]) {
											addressEditForm.elements[key].value = address[key];
										}
									}
									showEditForm(addressId);
								})
								.catch(error => console.error('Error:', error));
						}
					});
				
					cancelEditBtn.addEventListener('click', hideEditForm);
				});
				</script>
				<!--END-->

				<!--Script for Change Password With help of AJAX-->
				<script>
					document.addEventListener('DOMContentLoaded', function() {
						const form = document.getElementById('change-password-form');
						const csrftoken = form.querySelector('[name=csrfmiddlewaretoken]').value;
					
						form.addEventListener('submit', function(e) {
							e.preventDefault();
							
							const formData = new FormData(this);
							
							fetch('{% url "change_password" %}', {
								method: 'POST',
								body: formData,
								headers: {
									'X-Requested-With': 'XMLHttpRequest',
									'X-CSRFToken': csrftoken
								}
							})
							.then(response => response.json())
							.then(data => {
								const messageDiv = document.getElementById('message');
								messageDiv.style.display = 'block';
								
								if (data.success) {
									messageDiv.innerHTML = '<p style="color: green;">Password changed successfully!</p>';
									this.reset();
									setTimeout(function() {
										window.location.reload();  // Reload the page after a short delay
									}, 2000);  // 2-second delay before reload
								} else {
									const errorList = data.errors.map(error => `<li>${error}</li>`).join('');
									messageDiv.innerHTML = `<p style="color: red;">Error(s):</p><ul>${errorList}</ul>`;
								}
							})
							.catch(error => {
								console.error('Error:', error);
								document.getElementById('message').innerHTML = '<p style="color: red;">An error occurred. Please try again.</p>';
							});
						});
					});
					
				</script>
				<!--END-->

				<!--Script for account area-->
				<script>
					document.addEventListener('DOMContentLoaded', function() {
						const sidebarLinks = document.querySelectorAll('.account-sidebar a');
						const accountSections = document.querySelectorAll('.account-section');
					
						sidebarLinks.forEach(link => {
							link.addEventListener('click', function(e) {
								e.preventDefault();
								const targetId = this.getAttribute('href').substring(1);
					
								// Hide all sections and remove active class from links
								accountSections.forEach(section => section.classList.remove('active'));
								sidebarLinks.forEach(link => link.classList.remove('active'));
					
								// Show target section and set link as active
								document.getElementById(targetId).classList.add('active');
								this.classList.add('active');
							});
						});
					});
					</script>


			<!--Sweet Alert Script-->
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
		<script>
			function confirmCancel(orderId) {
				Swal.fire({
					title: 'Are you sure?',
					text: "You won't be able to revert this!",
					icon: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Yes, cancel it!'
				}).then((result) => {
					if (result.isConfirmed) {
						document.getElementById('cancel-form-' + orderId).submit();
					}
				})
			}
		
			function confirmReturn(orderId) {
				Swal.fire({
					title: 'Are you sure?',
					text: "You can return this item!",
					icon: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Yes, return it!'
				}).then((result) => {
					if (result.isConfirmed) {
						document.getElementById('return-form-' + orderId).submit();
					}
				})
			}
		</script>


	 <!--Address validation Script-->
	 <script>
	 document.addEventListener('DOMContentLoaded', function() {
		// Function to validate the form
		function validateForm(form) {
			let isValid = true;
			const nameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
			const addressTitleRegex = /^[a-zA-Z0-9]+(?: [a-zA-Z0-9]+)*$/;
			const alphabetRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
			const pincodeRegex = /^\d{6}$/;
			const phoneRegex = /^[789]\d{9}$/;
	
			// Validate Full Name
			const fullName = form.querySelector('#full_name');
			if (!nameRegex.test(fullName.value.trim())) {
				showError(fullName, 'Name should contain only alphabets and not start with space');
				isValid = false;
			} else {
				clearError(fullName);
			}
	
			// Validate Address Title
			const addressTitle = form.querySelector('#address_title');
			if (!addressTitleRegex.test(addressTitle.value.trim())) {
				showError(addressTitle, 'Address title should contain only alphabets and numbers, and not start with space');
				isValid = false;
			} else {
				clearError(addressTitle);
			}
	
			// Validate State
			const state = form.querySelector('#state');
			if (!alphabetRegex.test(state.value.trim())) {
				showError(state, 'State should contain only alphabets and not start with space');
				isValid = false;
			} else {
				clearError(state);
			}
	
			// Validate City
			const city = form.querySelector('#city');
			if (!alphabetRegex.test(city.value.trim())) {
				showError(city, 'City should contain only alphabets and not start with space');
				isValid = false;
			} else {
				clearError(city);
			}
	
			// Validate Post Office
			const postOffice = form.querySelector('#post_office');
			if (!alphabetRegex.test(postOffice.value.trim())) {
				showError(postOffice, 'Post office should contain only alphabets and not start with space');
				isValid = false;
			} else {
				clearError(postOffice);
			}
	
			// Validate Pincode
			const pincode = form.querySelector('#pincode');
			if (!pincodeRegex.test(pincode.value.trim())) {
				showError(pincode, 'Pincode must be exactly 6 digits');
				isValid = false;
			} else {
				clearError(pincode);
			}
	
			// Validate Phone
			const phone = form.querySelector('#phone');
			if (!phoneRegex.test(phone.value.trim())) {
				showError(phone, 'Phone number must be 10 digits and start with 7, 8, or 9');
				isValid = false;
			} else {
				clearError(phone);
			}
	
			// Validate Address
			const address = form.querySelector('#address') || form.querySelector('textarea[name="address_line"]');
			if (address.value.trim().startsWith(' ')) {
				showError(address, 'Address should not start with space');
				isValid = false;
			} else {
				clearError(address);
			}
	
			return isValid;
		}
	
		// Function to show error message
		function showError(input, message) {
			const error = input.nextElementSibling;
			error.textContent = message;
			error.style.color = 'red';
		}
	
		// Function to clear error message
		function clearError(input) {
			const error = input.nextElementSibling;
			error.textContent = '';
		}
	
		// Add event listener for add address form
		const addAddressForm = document.getElementById('address-form');
		if (addAddressForm) {
			addAddressForm.addEventListener('submit', function(e) {
				if (!validateForm(this)) {
					e.preventDefault();
				}
			});
		}
	
		// Add event listener for edit address form
		const editAddressForm = document.getElementById('address-edit-form');
		if (editAddressForm) {
			editAddressForm.addEventListener('submit', function(e) {
				if (!validateForm(this)) {
					e.preventDefault();
				}
			});
		}
	});
</script>

	<!--SCRIPT FOR DATE OF BIRTH IN EDIT USER INFO-->
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			const today = new Date();
			const minDate = new Date('1930-01-01');
			const maxDate = new Date(today.getFullYear() - 10, today.getMonth(), today.getDate());

			// Format date as YYYY-MM-DD
			function formatDate(date) {
				const year = date.getFullYear();
				const month = ('0' + (date.getMonth() + 1)).slice(-2);
				const day = ('0' + date.getDate()).slice(-2);
				return `${year}-${month}-${day}`;
			}

			// Set min and max attributes	
			const dobField = document.getElementById('dob');
			dobField.setAttribute('min', formatDate(minDate));
			dobField.setAttribute('max', formatDate(maxDate));
		});
	</script>

			
			


	</body>

<!-- Mirrored from demo.hasthemes.com/fowler-preview/fowler/account.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jun 2024 10:16:24 GMT -->
</html>